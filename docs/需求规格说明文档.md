# 影院管理系统（CMS）需求规格说明文档

## 更新历史

| 修改人员 | 日期      | 变更原因 | 版本号 |
| -------- | --------- | -------- | ------ |
| Agent_67 | 2019.5.15 | 初始化   | v0.0   |
| Agent_67 | 2019.5.19 | 整合     | v1.0   |

## 1. 引言

### 1.1 目的

​	本文档描述了影院管理系统的功能需求和非功能需求。开发小组的软件系统实现与验证工作都以此文档为依据。

​	除特殊说明外，本文档所包含的需求都是高优先级需求。

### 1.2 范围

​	影院管理系统是为67家附近小影院开发的业务系统，开发目标是帮助该影院处理日常的重点业务，包括上架电影，查看电影想看人数，查看电影和操作想看电影。

### 1.3 参考文献

1. IEEE标准。
2. 影院管理系统用例文档。
3. 骆斌，丁二玉，刘钦 - 软件工程与计算 . 卷二 , 软件开发的技术基础 : Software engineering and computing . Volume Ⅱ , Fundamentals of software development technology。

## 2. 总体描述

### 2.1 项目前景

#### 2.1.1 背景与机遇

​	Agent_67是一家正在迅速发展的连锁电影院，其前身是一家独立的小型私人影院。原电影院只在线下销售部分使用软件处理，其它业务都由人工服务，这已经不能适应它的业务发展需求。首先是电影院规模的扩大，顾客量大幅增长，人工作业销售迟缓，顾客排队现象严重，时常无法购买最近场次的电影票，从而导致客源流失。其次是电影院上架的电影数量增多，影院无法准确掌握顾客的观影倾向，导致排片效率和质量低下。再次是电影院面临的竞争比以前更大，希望在减低人工成本、吸引顾客、增强竞争力的同时，保持盈利水平。
​	电影院网络售票系统就是为了满足Agent_67电影院新的业务发展要求而开发的，它包括一个数据集中服务器和多个客户端。数据集中服务器将所有的数据存储起来进行维护。用户通过客户端完成影院的任务，客户端和数据集中服务器采用实时通讯的方式完成数据交换。

#### 2.1.2 业务需求

- BR1：在系统使用6个月后，人工售票成本降低20%
- BR2：在系统使用6个月后，影院上座率提高40%
- BR3：在系统使用6个月后，销售额度要提高20%
  - 最好情况：40%
  - 最可能情况：20%
  - 最坏情况：10%

### 2.2 项目功能

- SF1：为观众提供电影信息的查看功能
- SF2：根据观众对电影的想看程度制定最佳的排片策略
- SF3：管理员上架新电影

### 2.3 用户特征

|   用户   |                             特征                             |
| :------: | :----------------------------------------------------------: |
|  管理员  | 电影院有1\~2个管理员。他们每天都要检查电影的想看人数并进行分析，每2\~3天进行一次电影的排片。在有新影片信息待录入的情况下，管理员将进行上架电影的操作。管理员的计算机操作技能较好。 |
| 影院员工 |                                                              |
|   客户   | 电影院有多个客户，客户可能会在任意时间段查询电影信息，并决定是否将电影标记为想看。 |

### 2.4 约束

- CON1：系统将使用Web界面
- CON2：系统将在PC及移动设备上运行
- CON3：项目要使用持续集成方法进行开发
- CON4：在开发中，开发者要提交软件需求规格说明文档，设计描述文档和测试报告
- CON5：系统只有在用户登录后才能使用

### 2.5 假设与依赖

- AE1：电影在上架后才能进行预售
- AE2：使用系统过程中保证网络连接通畅

## 3、详细需求描述

### 3.1 对外接口需求

#### 3.1.1 用户界面

UI1：管理退票策略

界面图示为：
![](https://i.loli.net/2019/05/19/5ce0f9e63f67127840.png)
UI1.1 管理员输入完信息后，系统会展示退票策略信息预览界面，如图
![](https://i.loli.net/2019/05/19/5ce0f9e6043d022869.png)

#### 3.1.2 通信接口

CI：客户端与服务器使用HTTP协议进行通信

### 3.2 功能需求

（序号延续上一阶段）

#### 3.2.28  操作退票策略
##### 3.2.28.1 特征描述
在有新的退票策略或需要修改退票策略时，一个经过验证的管理员开始操作退票策略，完成退票策略的录入和退票策略库的更新。

优先级=低
##### 3.2.28.2 刺激/响应序列
刺激：管理员请求添加退票策略

响应：系统显示退票策略表单

刺激：管理员请求修改退票策略

响应：系统显示退票策略表单

刺激：管理员确认更改

响应：系统显示修改成功，更新退票策略库

刺激：管理员取消修改

响应：系统关闭修改退票策略任务

刺激：管理员输入退票策略适用电影，退票策略适用时间，价格折算策略

响应：系统显示退票策略适用电影，退票策略适用时间，价格折算策略

刺激：管理员确认添加

响应：系统显示添加成功，更新退票策略库

刺激：管理员取消添加

响应：系统关闭添加退票策略任务

##### 3.2.28.3 相关功能需求
| 编号 | 需求描述 |
| :------------- | ----------------- |
| Refund.Input | 系统应允许管理员在操作退票策略任务中进行键盘输入 |
| Refund.Input.Preview | 在管理员完成退票策略信息输入时，系统显示退票策略信息预览，参见Refund.Preview |
| Refund.Input.Cancel | 在管理员取消操作时，系统关闭当前的任务 |
| Refund.Preview | 系统显示退票策略的信息预览 |
| Refund.Preview | 在管理员确认添加或修改时，系统上传退票策略信息，参见Refund.Submit |
| Refund.Submit | 系统应允许管理员提交退票策略信息 |
| Refund.Submit.Check | 在管理员提交退票策略信息时，系统检查退票策略信息 |
| Refund.Submit.Update  | 在管理员提交退票策略信息时，系统更新添加电影库               |
| Refund.Submit.Close   | 在管理员结束添加任务时，系统关闭添加任务                     |
| Refund.Check          | 系统检查添加的退票策略的信息，参见数据格式要求Format3，4        |
| Refund.Check.Invalid  | 如果数据格式错误，系统提示数据格式错误                       |

#### 3.2.29  影厅信息录入

##### 3.2.29.1 特征描述

在有新增影厅的时候，一个经过验证的管理员将影厅的信息录入系统中，包括影厅名称、座位排布

优先级：高

##### 3.2.29.2 刺激/响应序列

刺激：管理员请求录入影厅信息

响应：系统显示影厅信息录入表单

刺激：管理员输入影厅的名称、座位排布

响应：系统显示影厅信息预览，包括影厅的名称、座位排布和影厅规格（大/中/小）

刺激：管理员确认录入影厅信息

响应：系统更新影厅信息库并显示影厅信息录入成功

刺激：管理员请求修改影厅信息

响应：系统显示影厅信息修改表单

刺激：管理员取消录入影厅信息

响应：系统关闭录入影厅信息任务

##### 3.2.29.3 相关功能需求

| 编号                      | 需求描述                                                     |
| ------------------------- | ------------------------------------------------------------ |
| Hall.Add.Input            | 系统应允许管理员在录入影厅信息任务中进行键盘输入             |
| Hall.Add.Input.Preview    | 管理员完成影厅信息输入后，系统显示影厅信息预览，参见Hall.Add.Preview |
| Hall.Add.Input.Cancel     | 在管理员取消影厅信息录入时，系统关闭当前的影厅信息录入任务   |
| Hall.Add.Preview          | 系统显示影厅信息预览，参见3.4.1数据定义                      |
| Hall.Add.Preview.Check    | 在显示影厅信息预览前，系统应检查输入的影厅信息，参见Hall.Add.Check |
| Hall.Add.Preview.Submit   | 管理员确认录入影厅信息后，系统保存影厅信息，参见Hall.Add.Submit |
| Hall.Add.Preview.Cancel   | 管理员取消影厅信息录入，系统显示影厅信息录入界面，参见Hall.Add.Input |
| Hall.Add.Submit           | 系统保存用户提交的影厅信息                                   |
| Hall.Add.Submit.Check     | 在保存管理员提交的影厅信息到影厅信息库前，系统检查影厅信息，参见Hall.Add.Check |
| Hall.Add.Submit.Update    | 在影厅信息检查通过后，系统更新影厅信息库                     |
| Hall.Add.Submit.Close     | 在管理员结束影厅信息录入任务时，系统关闭影厅信息录入任务     |
| Hall.Add.Check            | 系统检查影厅信息，参见3.4.3数据格式要求                      |
| Hall.Add.Check.Exist      | 如果管理员输入的影厅名称已存在，系统提示该影厅名称已存在     |
| Hall.Add.Check.Incomplete | 如果管理员输入的影厅信息不完整，系统提示管理员影厅信息输入不完整 |
| Hall.Add.Check.Invalid    | 如果数据格式错误，系统提示数据格式错误                       |

#### 3.2.30 修改影厅信息

##### 3.2.30.1 特性描述

当影厅信息发生变动需要更新时，在影厅不在使用（即没有排片）的时候，一个经过验证的管理员可以对影厅的信息进行修改，包括影厅名称、座位排布

优先级：高

##### 3.2.30.2 刺激/响应序列

刺激：管理员请求修改影厅信息

响应：系统显示当前可修改信息的影厅列表

刺激：管理员请求修改列表中的一个影厅的信息

响应：系统显示该影厅当前的信息，包括影厅名称、座位排布和规格大小（大/中/小）

刺激：管理员修改并提交影厅的信息，包括影厅名称、座位排布

响应：系统显示修改后的影厅信息预览，包括影厅名称、座位排布和规格大小（大/中/小）

刺激：管理员发现信息修改有误，请求重新修改影厅信息

响应：系统关闭影厅信息预览，返回影厅信息修改界面

刺激：管理员确认修改影厅信息

响应：系统更新影厅信息库并提示影厅信息修改成功

刺激：管理员结束影厅信息修改任务

响应：系统关闭影厅信息修改任务

##### 3.2.30.3 相关功能需求		

| 编号                         | 需求描述                                                     |
| :--------------------------- | ------------------------------------------------------------ |
| Hall.Modify.View             | 系统显示当前可修改信息的影厅列表                             |
| Hall.Modify.View.Input       | 管理员请求修改列表中一个影厅的信息，系统显示影厅信息修改输入界面，参见Hall.Modify.Input |
| Hall.Modify.Close            | 系统关闭修改影厅信息任务                                     |
| Hall.Modify.Input            | 系统应该允许管理员在修改影厅信息任务中进行键盘输入           |
| Hall.Modify.Input.Preview    | 管理员输入并提交影厅信息，系统显示修改后的影厅信息预览，参见Hall.Modify.Preview |
| Hall.Modify.Input.Close      | 管理员取消修改当前影厅信息，系统关闭当前影厅信息修改界面并返回可修改信息的影厅列表，参见Hall.Modify.View |
| Hall.Modify.Preview          | 系统显示修改后的影厅信息预览                                 |
| Hall.Modify.Preview.Check    | 管理员提交修改的影厅信息后，系统在显示影厅信息预览前应检查管理员输入的影厅信息，参见Hall.Modify.Check |
| Hall.Modify.Preview.Submit   | 管理员确认修改影厅信息后，系统保存管理员提交的影厅信息，参见Hall.Modify.Submit |
| Hall.Modify.Preview.Cancel   | 管理员发现信息输入有误，取消修改影厅信息，系统返回影厅信息修改输入界面，参见Hall.Modify.Input |
| Hall.Modify.Submit           | 系统更新管理员修改的影厅信息                                 |
| Hall.Modify.Submit.Check     | 在保存管理员修改的影厅信息到影厅信息库前，系统检查影厅信息，参见Hall.Modify.Check |
| Hall.Modify.Submit.Update    | 在影厅信息检查通过后，系统更新影厅信息库                     |
| Hall.Modify.Submit.Close     | 在管理员结束影厅信息修改任务时，系统关闭影厅信息修改任务     |
| Hall.Modify.Check            | 系统检查影厅信息，参见3.4.3数据格式定义                      |
| Hall.Modify.Check.Exist      | 如果管理员输入的影厅名称已存在，系统提示该影厅名称已存在     |
| Hall.Modify.Check.Incomplete | 如果管理员输入的影厅信息不完整，系统提示管理员影厅信息输入不完整 |
| Hall.Modify.Check.Invalid    | 如果数据格式错误，系统提示数据格式错误                       |

#### 3.2.31  影院角色的增删改查

##### 3.2.31.1 特性描述

一个经过验证的管理员可以对影院角色的变动进行增删改查的管理，其中管理员不能删除和修改其他的管理员账号

优先级：高

##### 3.2.31.2 刺激/响应序列

刺激：管理员请求新增影院角色

响应：系统显示影院角色信息输入界面

刺激：管理员输入影院角色的用户名和选择角色（影院员工或者管理员）并提交

响应：系统创建并保存新的账号信息，然后显示新账号的信息，包括账号的用户名、密码和角色

刺激：管理员请求删除影院角色

响应：系统显示可删除的影院角色，即影院员工的账号列表，包括用户名和角色

刺激：管理员请求删除列表中的一个账号

响应：系统提示是否确定删除该账号

刺激：管理员确认删除

响应：系统从影院角色库中移除该账号并提示账号删除成功

刺激：管理员取消删除账号

响应：系统返回可删除的影院角色的账号列表

刺激：管理员请求修改影院角色

响应：系统显示可修改的影院角色，即影院员工的账号列表，包括用户名、密码和角色

刺激：管理员请求修改列表中的一个账号信息

响应：系统显示账号信息的修改表单，包括用户名、密码和角色

刺激：管理员修改账号信息并提交

响应：系统显示修改后的账号信息预览，包括用户名、密码和角色

刺激：管理员发现输入有误，取消修改账号信息

响应：系统返回账号信息的修改表单界面

刺激：管理员确认修改账号信息

响应：系统更新影院角色信息库并提示影院角色信息修改成功

刺激：管理员请求查看影院角色列表

响应：系统显示所有的影院角色账号列表，包括用户名和角色

##### 3.2.31.3 相关功能需求

| 编号                         | 需求描述                                                     |
| ---------------------------- | ------------------------------------------------------------ |
| Role.Add                     | 系统应该允许管理员新增一个影院角色，包括影院员工或者管理员   |
| Role.Add.Input               | 系统应该允许管理员在新增影院角色任务中进行键盘输入           |
| Role.Add.Input.Submit        | 管理员输入影院角色的用户名和选择角色（影院员工或者管理员）并提交，系统保存管理员输入的角色信息，参见Role.Add.Submit |
| Role.Add.Submit              | 系统保存管理员输入的角色信息                                 |
| Role.Add.Submit.Check        | 在保存管理员输入的角色信息前，系统应该检查管理员输入的影院角色信息，参见Role.Add.Check |
| Role.Add.Submit.Create       | 在影院角色信息检查通过后，系统根据影院角色信息创建一个新的账号，并自动生成初始密码，参见3.4.2默认数据，然后显示新的账号信息，参见3.4.1数据定义 |
| Role.Add.Submit.Close        | 管理员结束影院角色新增任务，系统关闭影院角色新增任务         |
| Role.Add.Check               | 系统检查影院角色信息，参见3.4.3数据格式定义                  |
| Role.Add.Check.Incomplete    | 如果影院角色用户名没有输入或者影院角色没有选择，系统提示影院角色信息输入不完整 |
| Role.Add.Check.Invalid       | 如果影院角色用户名数据格式不正确，系统提示用户名数据格式不正确 |
| Role.Add.Check.Exist         | 如果影院角色用户名在影院角色信息库中已经存在，系统提示该用户名已存在 |
| Role.Delete                  | 系统应该允许管理员删除影院员工的账号                         |
| Role.Delete.View             | 管理员请求删除影院角色，系统显示影院员工的账号信息列表，参见3.4.1数据定义 |
| Role.Delete.View.Submit      | 管理员选择要删除的账号并提交，系统处理影院角色账号删除任务，参见Role.Delete.Submit |
| Role.Delete.View.Close       | 管理员结束删除影院角色任务，系统关闭删除影院角色任务         |
| Role.Delete.Submit           | 系统应该能够移除管理员提交的账号                             |
| Role.Delete.Submit.Continue  | 管理员选择删除影院角色账号，系统提示是否确定删除影院角色账号 |
| Role.Delete.Submit.Confirm   | 管理员确认删除影院角色账号，系统从影院角色库中移除该账号，并提示账号删除成功 |
| Role.Delete.Submit.Cancel    | 管理员取消删除影院角色账号，系统返回可删除的影院角色列表，参见Role.Delete.View |
| Role.Delete.Submit.Close     | 管理员结束影院角色删除任务，系统关闭影院角色删除任务         |
| Role.Modify                  | 系统应该允许管理员修改影院员工的角色信息                     |
| Role.Modify.View             | 管理员请求修改影院角色信息，系统显示影院员工的账号信息列表，参见3.4.1数据定义 |
| Role.Modify.View.Input       | 管理员请求修改列表中一个影院角色的账号信息，系统显示影院角色修改表单，参见Role.Modify.Input |
| Role.Modify.View.Close       | 管理员关闭影院角色修改任务，系统关闭影院角色修改任务         |
| Role.Modify.Input            | 系统应该允许管理员在影院角色修改任务中进行键盘输入           |
| Role.Modify.Input.Preview    | 管理员修改影院角色信息（参见3.4.1数据定义）并提交，系统显示影院角色信息预览，参见Role.Modify.Preview |
| Role.Modify.Input.Close      | 管理员取消修改当前影院角色信息，系统返回可修改的影院角色账号列表，参见Role.Modify.View |
| Role.Modify.Preview          | 系统显示影院角色信息预览                                     |
| Role.Modify.Preview.Check    | 在显示影院角色信息预览前，系统应检查管理员输入的影院角色信息，参见Role.Modify.Check |
| Role.Modify.Preview.Submit   | 管理员确认修改影院角色信息，系统处理影院角色信息保存任务，参见Role.Modify.Submit |
| Role.Modify.Preview.Cancel   | 管理员取消修改影院角色信息，系统返回影院角色修改表单界面，参见Role.Modify.View.Input |
| Role.Modify.Submit           | 系统应该能够保存管理员修改的影院角色信息                     |
| Role.Modify.Submit.Check     | 在保存管理员输入的影院角色信息前，系统应检查影院角色信息，参见Role.Modify.Check |
| Role.Modify.Submit.Update    | 在影院角色信息检查通过后，系统更新影院角色信息库并提示影院角色信息修改成功 |
| Role.Modify.Submit.Close     | 管理员结束影院角色信息修改任务，系统关闭影院角色修改任务     |
| Role.Modify.Check            | 系统检查影院角色信息，参见3.4.3数据格式定义                  |
| Role.Modify.Check.Exist      | 如果影院角色用户名已存在，系统提示用户名已存在               |
| Role.Modify.Check.Incomplete | 如果影院角色信息输入不完整，系统提示影院角色信息输入不完整   |
| Role.Modify.Check.Invalid    | 如果影院角色信息数据格式不正确，系统提示数据信息格式不正确   |
| Role.View                    | 系统应该允许管理员查看影院角色信息，参见3.4.1数据定义        |
| Role.View.List               | 管理员请求查看影院角色信息，系统显示所有影院角色账号列表     |
| Role.View.Close              | 管理员结束影院角色信息查看任务，系统关闭影院角色信息查看任务 |

#### 3.2.32 查看历史充值记录

##### 3.2.32.1 特性描述

经过登陆验证的观众可以使用系统查看自己的历史充值记录

优先级=高

##### 3.2.32.2 刺激/响应序列

刺激：观众请求查看历史充值记录

响应：系统显示充值记录，包括充值金额，充值时间

刺激：观众请求查看某一充值记录详情

响应：系统显示充值记录详情，包括充值金额，优惠金额，充值时间，会员卡余额

刺激：观众退出充值记录详情页面

响应：系统返回充值记录页面

##### 3.2.32.3 相关功能需求

| 编号                    | 需求描述                                           |
| ----------------------- | -------------------------------------------------- |
| TopUpRecord.View        | 系统显示充值记录列表，按照充值时间降序排列         |
| TopUpRecord.View.Detail | 系统应该允许观众查看充值记录详情                   |
| TopUpRecord.Detail      | 系统显示充值记录详情                               |
| TopUpRecord.Detail.Exit | 系统应该允许观众从充值记录详情页返回至充值记录页面 |

#### 3.2.33 查看历史消费记录

##### 3.2.33.1 特性描述

经过登陆验证的观众可以使用系统查看自己的历史消费记录

优先级=高

##### 3.2.33.2 刺激/响应序列

刺激：观众请求查看历史消费记录

响应：系统显示消费记录，包括消费类型，消费金额，消费时间

刺激：观众请求查看某一消费记录详情

响应：系统显示消费记录详情，包括消费类型（购买电影票，购买会员卡），消费方式，消费详细内容（购买电影票：电影名称，影厅名称，座位号，放映时间；购买会员卡：会员卡类型），消费金额，优惠金额，消费时间

刺激：观众退出消费记录详情页面

响应：系统返回消费记录页面

##### 3.2.33.3 相关功能需求

| 编号                      | 需求描述                                           |
| ------------------------- | -------------------------------------------------- |
| ConsumeRecord.View        | 系统显示消费记录列表，按照消费时间降序排列         |
| ConsumeRecord.View.Detail | 系统应该允许观众查看消费记录详情                   |
| ConsumeRecord.Detail      | 系统显示消费记录详情                               |
| ConsumeRecord.Detail.Exit | 系统应该允许观众从消费记录详情页返回至消费记录页面 |

#### 3.2.34 用户出票

##### 3.2.34.1 特性描述

经过登陆验证的观众可以对已购买的电影票进行出票操作

##### 3.2.34.2 刺激/相应序列

刺激：观众请求出票

响应：系统更新电影票记录，提示出票成功

##### 3.2.34.3 相关功能需求

| 编号             | 需求描述                       |
| ---------------- | ------------------------------ |
| Ticketing.Submit | 观众请求出票，系统提示出票成功 |

#### 3.2.35 用户退票

##### 3.2.35.1 特性描述

经过登陆验证的观众可以退订已支付但未出票的电影票，根据退票策略获得不同的退票补偿

优先级=高

##### 3.2.35.2 刺激/响应序列

刺激：观众请求退票

响应：系统显示退票信息，包括电影名称，影厅名称，座位号，放映时间，购票金额，退票策略

刺激：观众确认退票

响应：系统更新电影票记录，提示退票成功

刺激：观众取消退票

响应：系统返回请求退票页

##### 3.2.35.3 相关功能需求

| 编号                            | 需求描述                           |
| ------------------------------- | ---------------------------------- |
| ReturnTicket.Information        | 系统应该显示退票信息以供观众查验   |
| ReturnTicket.Information.Submit | 观众确认退票时，系统提示退票成功   |
| ReturnTicket.Information.Cancel | 观众取消退票时，系统返回请求退票页 |

#### 3.2.36  发布会员卡

##### 3.2.36.1 特征描述

在有新的会员卡需要发布时，一个经过验证的管理员开始发布新的会员卡类型，完成新会员卡类型库的更新。

优先级：低

##### 3.2.36.2 刺激/响应序列

刺激：管理员请求发布新的会员卡类型

响应：系统显示会员卡信息填写表单

刺激：管理员输入会员卡的名称、充值优惠的需满金额和优惠金额、购票优惠的需满金额，优惠金额，购买价格并确认

响应：系统显示发布成功

刺激：管理员取消发布

响应：系统关闭发布会员卡任务

##### 3.2.36.3 相关功能需求

| 编号                  | 需求描述                                                     |
| --------------------- | ------------------------------------------------------------ |
| Publish.Input         | 系统应允许管理员在发布会员卡任务中进行键盘输入               |
| Publish.Input.Cancel  | 在管理员取消发布时，系统关闭当前的发布任务                   |
| Publish.Input.Submit  | 在管理员结束发布任务后，系统关闭发布任务，参见Publish.Submit |
| Publish.Submit        | 系统应该允许管理员提交会员卡信息                             |
| Publish.Submit.Check  | 在管理员提交会员卡信息时，系统检查会员卡信息，参见Publish.Check |
| Publish.Submit.Update | 在管理员提交会员卡信息时，系统更新会员卡类型库               |
| Publish.Check         | 系统检查会员卡的信息，参见数据格式要求Format5                |
| Publish.Check.Invalid | 如果数据格式错误，系统提示数据格式错误                       |

#### 3.2.37  修改会员卡优惠策略

##### 3.2.37.1 特征描述

在需要修改会员卡优惠策略时，一个经过验证的管理员开始修改会员卡优惠策略，完成会员卡类型库的更新。

优先级：低

##### 3.2.37.2 刺激/响应序列

刺激：管理员请求修改会员卡优惠策略

响应：系统显示会员卡信息填写表单

刺激：管理员输入充值优惠的需满金额和优惠金额、购票优惠的需满金额和优惠金额并确认

响应：系统显示修改成功

刺激：管理员输入不符合规范的会员卡信息

响应：系统显示修改失败

刺激：管理员取消修改

响应：系统关闭修改会员卡优惠策略任务

##### 3.2.37.3 相关功能需求

| 编号                 | 需求描述                                                     |
| -------------------- | ------------------------------------------------------------ |
| Update.Input         | 系统应允许管理员在修改会员卡优惠策略任务中进行键盘输入       |
| Update.Input.Cancel  | 在管理员取消修改时，系统关闭当前的修改任务                   |
| Update.Input.Submit  | 在管理员结束修改任务后，系统关闭修改任务，参见Update.Submit  |
| Update.Submit        | 系统应该允许管理员提交会员卡信息                             |
| Update.Submit.Check  | 在管理员提交会员卡信息时，系统检查会员卡信息，参见Update.Check |
| Update.Submit.Update | 在管理员提交会员卡信息时，系统更新会员卡类型库               |
| Update.Check         | 系统检查会员卡的信息，参见数据格式要求Format5                |
| Update.Check.Invalid | 如果数据格式错误，系统提示数据格式错误                       |

#### 3.2.38  赠送优惠券

##### 3.2.38.1 特征描述

在电影院需要反馈消费满一定金额的会员时，一个经过验证的管理员开始筛选符合条件的会员并选择将被赠送的优惠券，完成优惠券与用户关系库的更新。

优先级：中

##### 3.2.38.2 刺激/响应序列

刺激：管理员请求赠送优惠券

响应：系统显示用户消费金额检索框

刺激：管理员输入消费金额并确认

响应：系统返回消费金额大于指定金额的会员，并提示管理员选择需要赠送的优惠券和被赠送的会员

刺激：管理员选择会员和优惠券并确认

响应：系统提示赠送成功

##### 3.2.38.3 相关功能需求

| 编号                  | 需求描述                                                     |
| --------------------- | ------------------------------------------------------------ |
| Present.Input         | 系统应允许管理员在赠送优惠券任务中进行键盘输入               |
| Present.Input.Cancel  | 在管理员取消赠送时，系统关闭当前的赠送任务                   |
| Present.Input.Submit  | 在管理员结束赠送任务时，系统关闭赠送任务，参见Present.Submit |
| Present.Submit        | 系统应允许管理员提交赠送信息                                 |
| Present.Submit.Update | 在管理员提交赠送信息时，系统更新优惠券与用户关系库           |
| Present.Submit.Check  | 在管理员提交赠送信息时，系统检查优惠券信息，参见Present.Check |
| Present.Member        | 系统应显示会员信息                                           |
| Present.Member.Search | 系统应许管理员查找会员信息，参见Present.Search               |
| Present.Coupon        | 系统应显示优惠券信息                                         |
| Present.Coupon.Search | 系统应允许管理员查找优惠券信息，参见Present.Search           |
| Present.Search        | 系统应允许管理员在数据库查找信息                             |
| Present.Check         | 系统检查输入的消费金额，参见数据格式要求Format5              |
| Present.Check.Invalid | 如果数据格式错误，系统提示数据格式错误                       |

### 3.3 非功能需求

#### 3.3.1  安全性

- Safety1：系统应该只允许经过登录验证的观众标记电影为想看
- Safety2：系统应该按照用户身份验证用户的访问权限：
  - 管理员和观众的身份授权参见功能需求
  - 其他身份的用户仅拥有查看电影的权限

#### 3.3.2  可维护性

- Modifiability1：如果系统要增加新的管理员功能，要能够在0.15个人月内完成
- Modifiability2：如果系统要增加新的观众服务，要能够在0.25个人月内完成

#### 3.3.3  易用性

- Usability1：系统会根据观众偏好调整电影的显示顺序
- Usability2：系统允许经过登录验证的观众一个月内免登陆

#### 3.3.4  可靠性

- Reliability1：在客户端与服务器通讯时，如果网络故障，系统不能出现故障。
  - Reliability1.1：客户端应该检测到故障，并尝试重新连接网络3次，每次15秒。
    - Reliability1.1.1：重新连接后，客户端应该继续之前的工作
    - Reliability1.1.2：如果连接不成功，客户端应该等待5分钟后再次重新连接。
      - Reliability1.1.2.1：重新连接后，客户端应该继续之前的工作
      - Reliability1.1.2.2：如果重新连接仍然不成功，客户端报警

#### 3.3.5  业务规则

BR1：用户查看电影票时将已放映的电影票设为已出票状态

#### 3.3.6  约束

- IC1：系统能够一天24小时为观众提供电影查看服务
- IC2：系统要在网络上分布为一个服务器和多个客户端

### 3.4  数据需求

#### 3.4.1  数据定义

DR1：影厅信息预览包括影厅名称、座位排布和影厅规格（大/中/小）

DR2：影院角色账号信息包括账号编号、用户名、密码和角色

DR3：管理员新增影院角色时输入的信息包括用户名和角色

DR4：管理员修改影院角色时显示的账号列表信息包括编号、用户名、密码和角色，修改影院角色信息包括用户名、密码和角色

DR5：管理员删除影院角色时显示的账号列表信息包括编号、用户名和角色

DR6：管理员查看影院角色信息包括编号、用户名和角色

DR7：系统需要保存所有的退票策略，并在适用电影下架后仍需存储3个月的时间，保证后续退票操作的解释

#### 3.4.2  默认数据

默认数据用于以下情况：
- 退票策略相关信息空缺

Default1：默认适用电影为所有电影

Default2：退票策略默认适用时间为所有时间

Default3：影院角色账号初始密码为123456

Default4：默认全票退款

#### 3.4.3  数据格式要求

Format1：影厅信息格式，影厅名称为非空字符串，座位排布的座位数为正整数，影厅规格为大（>300座）、中（>80座但<=300座）和小（<=80座）三种

Format2：影院角色账号信息格式，编号为影院角色信息库自动生成的整数ID，用户名由英文字母、数字或者下划线组成、首字符为英文字母的、长度至少为4的字符串，密码为长度至少为6的有英文字母、数字或者下划线组成的字符串，角色为影院员工或者管理员

Format3：默认适用时间必须是以天为单位的正整数

Format4：价格折算策略必须是0到100之间的正整数

Format5：金额必须是正整数

### 3.5  其他需求

* 系统投入使用时，需要对管理员进行1个星期的集中培训
* 观众登录时要初始化观众的基本信息、想看电影列表和偏好设置