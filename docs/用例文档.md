# 影院管理系统（CMS）用例文档

## 更新历史

| 修改人员 | 日期      | 变更原因 | 版本号 |
| -------- | --------- | -------- | ------ |
| Agent67  | 2019.5.15 | 初始化   | v0.1   |
| Agent67  | 2019.5.19 | 整合     | v1.1   |

## 1. 引言

### 1.1目的

本文档以用例的视角描述了电影院网络售票系统的用户需求

### 1.2阅读说明

1. 此文档包含用例、各用例的详细描述以及相应的系统顺序图、概念类图和状态图
2. 用例描述的约定为ID、名称、参与者、触发条件、前置条件、后置条件、正常流程、扩展流程和特殊需求

### 1.3参考文献

1. 《软件开发的技术基础》 骆斌，丁二玉，刘钦
2. IEEE标准

## 2. 用例图



## 3. 用例列表

- 管理员
  - 影厅信息录入
  - 修改影厅信息
  - 影院角色增删改查
  - 添加退票策略
  - 修改退票策略
  - 发布会员卡
  - 修改会员卡优惠策略
  - 赠送优惠券
- 观众
  - 查看历史充值记录
  - 查看历史消费记录
  - 用户退票

## 4. 详细用例描述

### 4.28 影厅信息录入

- 用例编号：28   

- 名称：影厅信息录入                                   

- 创建者：陈培鸿

- 创建日期：2019-5-18

- 最后一次更新者：陈培鸿

- 更新日期：2019-5-18

- 参与者 ：管理员，目标是及时将新的影厅信息录入系统

- 触发条件：管理员有新的影厅信息需要录入系统

- 前置条件：管理员的身份已经被识别和授权

- 后置条件：存储新录入的影厅信息，包括影厅名称、座位排布和影厅规格（大/中/小）

- 优先级：高

- 正常流程：

  ​	1.管理员完成影厅信息的输入，包括影厅名称、座位排布和影厅规格（大/中/小），并提交

  ​	2.系统显示电影信息预览，包括影厅名称、座位排布和影厅规格（大/中/小）

  ​	3.管理员确认录入

  ​	4.系统提示影厅信息录入成功

  ​	5.管理员结束影厅信息录入，系统关闭影厅信息录入任务

- 扩展流程：

  ​	1a.影厅信息（包括影厅名称、座位排布和影厅规格）尚未填写完整：

  ​		1.系统提示信息填写不完全并拒绝提交

  ​		2.返回正常流程第1步

  ​	1b.影厅信息格式不正确

  ​		1.系统提示信息格式不正确并拒绝提交

  ​		2.返回正常流程第1步

  ​	1c.系统已存在同名的影厅

  ​		1.系统提示影厅名称已存在并拒绝提交

  ​		2.返回正常流程第1步

  ​	2a.管理员发现当前输入的影厅信息有误：

  ​		1.管理员选择修改影厅信息

  ​		2.返回正常流程第1步

- 特殊需求：

  ​	1.管理员可能需要同时录入多个影厅信息

### 4.29 修改影厅信息

- 用例编号：29

- 名称：修改影厅信息                              

- 创建者：陈培鸿

- 创建日期：2019-5-18

- 最后一次更新者：陈培鸿

- 更新日期：2019-5-18

- 参与者 ：管理员，目标是及时更新影厅的信息

- 触发条件：影厅信息发生变动，管理员需要更新影厅信息

- 前置条件：管理员的身份已经被识别和授权

- 后置条件：更新影厅信息，包括影厅名称、座位排布和影厅规格（大/中/小）

- 优先级：高

- 正常流程：

  ​	1.管理员开始影厅信息修改任务

  ​	2.系统显示可修改信息的影厅列表（当前没有排片的影厅才是可修改信息的）

  ​	3.管理员选择列表中的一个影厅

  ​	4.系统显示该影厅当前的信息（影厅名称、座位排布和影厅规格）

  ​	5.管理员修改影厅的信息（影厅名称、座位排布）并提交

  ​	6.系统显示影厅修改后的信息预览（影厅名称、座位排布和影厅规格）

  ​	7.管理员确认修改信息

  ​	8.系统提示影厅信息修改成功

  ​	9.管理员结束影厅信息修改，系统关闭影厅信息修改任务

- 扩展流程：

  ​	2a.当前没有可修改信息的影厅：

  ​		1.系统提示当前影厅全部正在使用中，没有可修改信息的影厅

  ​		2.返回正常流程第9步

  ​	4a.管理员选择的影厅已有排片（在显示列表到管理员选择影厅期间该影厅被排片了）：

  ​		1.系统提示当前影厅正在使用中，不能修改影厅信息

  ​		2.返回正常流程第2步

  ​	5a.影厅信息格式不正确

  ​		1.系统提示信息格式不正确并拒绝提交

  ​		2.返回正常流程第5步

  ​	5b.影厅信息（包括影厅名称、座位排布）尚未填写完整：

  ​		1.系统提示信息填写不完全并拒绝提交

  ​		2.返回正常流程第5步

  ​	8a.系统已存在同名的影厅

  ​		1.系统提示影厅名称已存在并拒绝提交

  ​		2.返回正常流程第5步

  ​	9a.管理员还要修改其他影厅信息

  ​		1.管理员选择继续修改影厅信息

  ​		2.返回正常流程第2步

- 特殊需求：影厅信息在修改的时候，该影厅不允许被排片

### 4.30 影院角色增删改查

- 用例编号：30

- 名称：影院角色增删改查                              

- 创建者：陈培鸿

- 创建日期：2019-5-18

- 最后一次更新者：陈培鸿

- 更新日期：2019-5-18

- 参与者 ：管理员，目标管理影院工作人员使用系统的角色权限

- 触发条件：管理员要对影院角色的变动进行管理

- 前置条件：管理员的身份已经被识别和授权

- 后置条件：记录影院角色变更情况

- 优先级：高

- 正常流程：

  ​	**1.0 新增影院角色**

  ​	1.管理员输入用户名和选择要新增的角色（影院员工或者管理员），并提交

  ​	2.系统生成并保存新的账号信息，然后显示新账号的信息，包括账户的用户名、密码和角色（影院员工或者管理员）

  ​	**1.1 删除影院角色**

  ​	1.管理员查看可删除的影院角色列表（管理员只能删除影院员工的账号，不能删除管理员的账号）

  ​	2.系统显示影院员工的账号列表，包括用户名和角色

  ​	3.管理员选择要删除的账号

  ​	4.系统提示是否确定要删除该账号

  ​	5.管理员确认删除

  ​	6.系统移除该账号并提示账号删除成功

  ​	**1.2 修改影院角色**

  ​	1.管理员查看可修改的影院角色列表（管理员只能修改影院员工的账号，不能修改管理员的账号）

  ​	2.系统显示影院员工的账号列表，包括用户名、密码和角色

  ​	3.管理员修改列表中的一个账号信息（包括用户名、密码和角色）并提交

  ​	4.系统显示修改后的账号信息，包括用户名、密码和角色

  ​	5.管理员确认修改

  ​	6.系统更新该账号信息并提示修改成功

  ​	**1.3 查看影院角色**

  ​	1.管理员选择查看影院角色列表

  ​	2.系统显示所有的影院角色列表，包括用户名和角色

- 扩展流程：

  ​	**1.0 新增影院角色**

  ​	1a.用户名已存在：

  ​		1.系统提示用户名已存在

  ​		2.返回正常流程第1步

  ​	1b.用户名格式不正确：

  ​		1.系统提示用户名格式不正确

  ​		2.返回正常流程第1步

  ​	1c.信息填写不完整（没有填写用户名或者没有选择角色）：

  ​		1.系统提示管理员没有填写用户名或者没有选择角色

  ​		2.返回正常流程第1步

  ​	**1.1 删除影院角色**

  ​	5a.管理员取消删除该账号：

  ​		1.管理员取消删除

  ​		2.返回正常流程第2步

  ​	6a.管理员还要删除其他账号：

  ​		1.管理员选择继续删除其他账号

  ​		2.返回正常流程第2步

  ​	**1.2 修改影院角色**

  ​	3a.用户名或者密码格式不正确：

  ​		1.系统提示用户名或者密码格式不正确

  ​		2.返回正常流程第3步

  ​	3b.信息填写不完整：

  ​		1.系统提示用户名或者密码没有填写

  ​		2.返回正常流程第3步

  ​	6a.用户名已存在：

  ​		1.系统提示该用户名已存在

  ​		2.返回正常流程第3步

  ​	6b.管理员还要修改其他账号信息：

  ​		1.管理员选择继续修改账号信息

  ​		2.返回正常流程第2步

- 特殊需求：

  ​	1.超级管理员账号能够对管理员账号进行修改和删除

### 4.31 添加退票策略

* 用例编号：31

* 名称：添加退票策略                                

* 创建者：常卓

* 创建日期：2019-5-15

* 最后一次更新者：常卓

* 更新日期：2019-5-15

* 参与者 ：管理员，目的是添加退票策略

* 触发条件：管理员需要添加新的退票策略

* 前置条件：管理员的身份已经被识别和授权

* 后置条件：更新退票策略库，包括退票策略适用电影，退票策略适用时间，价格折算策略

* 优先级：低

* 正常流程:

  ​	1.管理员请求添加退票策略

  ​	2.系统提示管理员输入退票策略适用电影，退票策略适用时间，价格折算策略

  ​	3.管理员输入退票策略适用电影，退票策略适用时间，价格折算策略

  ​	4.系统显示退票策略适用电影，退票策略适用时间，价格折算策略

  ​	5.管理员确认添加

  ​	6.系统提示添加成功，关闭添加任务

* 扩展流程：

  ​	6a.系统发现适用电影的此使用时间已被添加，产生冲突

  ​		1.系统提示冲突

  ​		2.返回正常流程第3步

* 特殊需求：

  ​	1.系统需要保证随着退票时间变晚，价格折算递减，不会出现晚退票更优惠的情况

### 4.32 修改退票策略

* 用例编号：32

* 名称：修改退票策略                                                    

* 创建者：常卓

* 创建日期：2019-5-15

* 最后一次更新者：常卓

* 更新日期：2019-5-15

* 参与者 ：管理员，目的是修改退票策略 

* 触发条件：管理员需要修改退票策略

* 前置条件：管理员的身份已经被识别和授权

* 后置条件：更新退票策略库，包括退票策略适用电影，退票策略适用时间，价格折算策略

* 优先级：低

* 正常流程：

  ​	1.管理员请求修改退票策略

  ​	2.系统提示管理员输入退票策略适用电影，退票策略适用时间，价格折算策略

  ​	3.管理员输入退票策略适用电影，退票策略适用时间，价格折算策略

  ​	4.系统显示退票策略适用电影，退票策略适用时间，价格折算策略

  ​	5.管理员确认修改

  ​	6.系统提示修改成功

* 扩展流程：

  ​	5a.管理员确认时有用户正在退票

  ​		1.系统显示有用户正在退票，返回正常流程第4步

* 特殊需求：无

### 4.33 查看历史充值记录

* 用例编号：33

* 名称：查看历史充值记录

* 创建者：郝星威

* 创建日期：2019-5-15

* 最后一次更新者：郝星威

* 更新日期：2019-5-15

* 参与者：观众，目标是查看已完成的充值记录

* 触发条件：观众想要查看历史充值记录

* 前置条件：观众已登录

* 后置条件：无

* 优先级：高

* 正常流程：

  ​	1.观众请求查看历史充值记录

  ​	2.系统显示充值记录，包括充值金额，充值时间

  ​	3.观众请求查看某一充值记录详情

  ​	4.系统显示充值记录详情，包括充值金额，优惠金额，充值时间，会员卡余额

* 扩展流程：

  ​	1a.观众没有进行过充值

  ​		1.系统显示“您还没有进行过充值”

  ​	4a.观众想查看其他充值记录详情

  ​		1.返回正常流程第2步

* 特殊需求：无

### 4.34 查看历史消费记录

* 用例编号：34

* 名称：查看历史消费记录

* 创建者：郝星威

* 创建日期：2019-5-15

* 最后一次更新者：郝星威

* 更新日期：2019-5-15

* 参与者：观众，目标是查看已完成的消费记录

* 触发条件：观众想要查看历史消费记录

* 前置条件：观众已登录

* 后置条件：无

* 优先级：高

* 正常流程：

  ​	1.观众请求查看历史消费记录

  ​	2.系统显示消费记录，包括消费类型，消费金额，消费时间

  ​	3.观众请求查看某一消费记录详情

  ​	4.系统显示消费记录详情，包括消费类型（购买电影票，购买会员卡），消费方式，消费详细内容（购买电影票：电影名称，影厅名称，座位号，放映时间；购买会员卡：会员卡类型），消费金额，优惠金额，消费时间

* 扩展流程：

  ​	1a.观众没有进行过消费

  ​		1.系统显示“暂无消费记录”

  ​	4a.观众想查看其他消费记录详情

  ​		1.返回正常流程第2步

* 特殊需求：无

### 4.35 用户出票

* 用例编号：35

* 名称：用户出票

* 创建者：郝星威

* 创建日期：2019-5-19

* 最后一次更新者：郝星威

* 更新日期：2019-5-19

* 参与者：观众，目标是对已付款的电影票进行出票

* 触发条件：观众想要进行出票

* 前置条件：观众已登录

* 后置条件：无

* 优先级：高

* 正常流程：

  ​	1.观众请求出票

  ​	2.系统提示出票成功

* 扩展流程：无

* 特殊需求：无

### 4.36 用户退票

* 用例编号：36

* 名称：用户退票

* 创建者：郝星威

* 创建日期：2019-5-15

* 最后一次更新者：郝星威

* 更新日期：2019-5-15

* 参与者：观众，目标是退订已支付但未出票的电影票

* 触发条件：观众想要进行退票

* 前置条件：观众已登录

* 后置条件：无

* 优先级：高

* 正常流程：

  ​	1.观众请求退票

  ​	2.系统显示退票信息，包括电影名称，影厅名称，座位号，放映时间，购票金额，退票策略

  ​	3.观众确认退票

  ​	4.系统提示退票成功

* 扩展流程：

  ​	3a.观众取消退票

  ​		1.系统返回请求退票页

* 特殊需求：无

### 4.37 发布会员卡

* 用例编号：37

* 名称：发布会员卡

* 创建者：朱海铭

* 创建日期：2019-5-15

* 最后一次更新者：朱海铭

* 更新日期：2019-5-15

* 参与者 ：管理员

* 触发条件：管理员需要发布新的会员卡

* 前置条件：管理员的身份已经被识别和授权

* 后置条件：存储会员卡的信息，包括会员卡的名称、充值优惠的需满金额和优惠金额、购票优惠的需满金额和优惠金额，购买价格；更新会员卡类型库

* 优先级：低

* 正常流程：

  ​    1.管理员请求发布新的会员卡类型

  ​    2.系统显示会员卡信息填写表单

  ​    3.管理员完成会员卡信息的输入，包括会员卡的名称、充值优惠的需满金额和优惠金额、购票优惠的需满金额和优惠金额，购买价格

  ​    4.管理员确认发布会员卡

  ​    5.系统提示发布成功

* 扩展流程：

  ​    3a.会员卡信息填写不完全

  ​        1.系统提示信息填写不完全并拒绝提交

  ​        2.返回正常流程第2步

  ​    3b.会员卡信息格式不正确

  ​        1.系统提示信息格式不正确并拒绝提交

  ​        2.返回正常流程第2步

  ​    4c.名称相同或其他内容完全相同的会员卡已被发布

  ​        1.系统提示错误并拒绝提交

  ​        2.返回正常流程第2步

* 特殊需求：

  ​    1.管理员可能需要同时发布多张会员卡

### 4.38 修改会员卡优惠策略

* 用例编号：38

* 名称：修改会员卡优惠策略

* 创建者：朱海铭

* 创建日期：2019-5-15

* 最后一次更新者：朱海铭

* 更新日期：2019-5-15

* 参与者 ：管理员

* 触发条件：管理员需要修改已有会员卡的优惠策略

* 前置条件：管理员的身份已经被识别和授权

* 后置条件：更新会员卡类型库

* 优先级：低

* 正常流程：

  ​    1.管理员请求修改会员卡优惠策略

  ​    2.系统显示会员卡信息填写表单

  ​    3.管理员完成会员卡信息的输入，包括会员卡的充值优惠的需满金额和优惠金额、购票优惠的需满金额和优惠金额

  ​    4.管理员确认修改会员卡优惠策略

  ​    5.系统提示修改成功

* 扩展流程：

  ​    3a.会员卡信息填写不完全

  ​        1.系统提示信息填写不完全并拒绝提交

  ​        2.返回正常流程第2步

  ​    3b.会员卡信息格式不正确

  ​        1.系统提示信息格式不正确并拒绝提交

  ​        2.返回正常流程第2步

* 特殊需求：无


### 4.39 赠送优惠券

* 用例编号：39

* 名称：赠送优惠券

* 创建者：朱海铭

* 创建日期：2019-5-15

* 最后一次更新者：朱海铭

* 更新日期：2019-5-15

* 参与者 ：管理员，用户

* 触发条件：管理员需要回馈消费满一定金额的会员

* 前置条件：管理员的身份已经被识别和授权

* 后置条件：更新优惠券与用户优惠券库

* 优先级：中

* 正常流程：

  ​    1.管理员请求赠送优惠券

  ​    2.系统显示用户消费金额检索框，消费金额包括购票金额和会员卡充值金额

  ​    3.管理员输入消费金额

  ​    4.管理员确认检索

  ​    5.系统返回消费金额大于指定金额的会员，并提示管理员选择需要赠送的优惠券和被赠送的会员

  ​    6.管理员选择会员和优惠券

  ​    7.管理员确认赠送优惠券

  ​    8.系统提示赠送成功

* 扩展流程：

  ​    4a.消费金额信息填写不完全

  ​        1.系统提示信息填写不完全并拒绝提交

  ​        2.返回正常流程第2步

  ​    4b.消费金额格式填写不正确

  ​        1.系统提示信息格式不正确并拒绝提交

  ​        2.返回正常流程第2步

  ​    7a.未选择会员或优惠券

  ​        1.系统提示未选择会员或优惠券

  ​        2.返回正常流程第5步

* 特殊需求：

  ​    1.管理员可能需要同时发放多张优惠券

  ​    2.管理员可能需要了解用户消费统计图

  ​    3.管理员可能需要发布新优惠券

## 5. 需求分析模型 

### 5.1 系统顺序图

### 5.2 概念类图

### 5.3 状态图
